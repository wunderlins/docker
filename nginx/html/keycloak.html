<!DOCTYPE html>

<html>
<head>
<script src="http://localhost:8080/js/keycloak.js"></script>
<script>
    function initKeycloak() {
        /*
        const keycloak = new Keycloak({
            url: 'http://localhost:8080',
            realm: 'myrealm',
            clientId: 'javascript-test',
            "auth-server-url": "http://localhost:8080/",
            "ssl-required": "external",
            "resource": "javascript-test",
            "public-client": true,
            "verify-token-audience": true,
            "use-resource-role-mappings": true,
            "confidential-port": 0
        });
        */
        //const keycloak = new Keycloak('javascript-test.json');
        const keycloak = new Keycloak({
            url: 'http://localhost:8080/',
            realm: 'myrealm',
            clientId: 'javascript-test'
        });
        keycloak.init({
            checkLoginIframe: false,
            onLoad: 'login-required'
        }).then(function(authenticated) {
            document.getElementById("status").value = (authenticated ? 'authenticated' : 'not authenticated');
            if (authenticated) {
                document.getElementById("token").value = keycloak.token;
            }
        }).catch(function(e) {
            console.error(e)
            alert('failed to initialize');
        });
    }
</script>
</head>
<body onload="initKeycloak()">
<!-- your page content goes here -->
<h1>Hello</h1>
<a href="https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter">https://www.keycloak.org/docs/latest/securing_apps/index.html#_javascript_adapter</a>
<div>
    <label for="status">status</label>
    <input type="text" id="status">
</div>
<div>
    <label for="token">JWT token</label>
    <textarea id="token" style="width: 100%; height: 20em;"></textarea>
</div>
</body>
</html>
